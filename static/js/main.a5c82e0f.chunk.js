(window["webpackJsonptodoist-tutorial"]=window["webpackJsonptodoist-tutorial"]||[]).push([[0],{14:function(e,t,a){e.exports=a(24)},23:function(e,t,a){},24:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(11),o=a(1),l=a(2),s=a(3),d=a.n(s),i=a(12),u=a.n(i),m=(a(20),u.a.initializeApp({apiKey:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/React"}).REACT_APP_apiKey),authDomain:"todoist-tutorial-fb4d4.firebaseapp.com",databaseURL:"https://todoist-tutorial-fb4d4.firebaseio.com",projectId:"todoist-tutorial-fb4d4",storageBucket:"todoist-tutorial-fb4d4.appspot.com",messagingSenderId:"276056291270",appId:"1:276056291270:web:5301db9f1d88141d14e4c7"})),f=a(13),k=[{key:"INBOX",name:"Inbox"},{key:"TODAY",name:"Today"},{key:"NEXT_7",name:"Next 7 Days"},{key:"ARCHIVED",name:"Archived"}],p=function(e){return k.find(function(t){return t.key===e})},j=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=[];return function(){for(var a=(new Date).getTime(),n=new Array(8),c=7;c>=0;c--)n[c]=e.charAt(a%64),a=Math.floor(a/64);var r=n.join("");for(c=0;c<12;c++)r+=e.charAt(t[c]);return r}}();function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(a,!0).forEach(function(t){Object(f.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v=m.firestore().collection("tasks"),h=m.firestore().collection("projects"),y=Object(n.createContext)(),O=function(e){var t=e.children,a=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)(function(){h.orderBy("projectId").get().then(function(e){var t=e.docs.map(function(e){return E({},e.data(),{docId:e.id})});JSON.stringify(t)!==JSON.stringify(a)&&c(t)})},[a]),{projects:a,setProjects:c}}(),r=a.projects,l=a.setProjects;return c.a.createElement(y.Provider,{value:{projects:r,setProjects:l}},t)},N=function(){return Object(n.useContext)(y)},_=Object(n.createContext)(),w=function(e){var t=e.children,a=Object(n.useState)("INBOX"),r=Object(o.a)(a,2),l=r[0],s=r[1];return c.a.createElement(_.Provider,{value:{selectedProject:l,setSelectedProject:s}},t)},D=function(){return Object(n.useContext)(_)},I=function(e){var t=e.setProject,a=e.showProjectOverlay,n=e.setShowProjectOverlay,r=N().projects;return r&&a&&c.a.createElement("div",{className:"project-overlay","data-testid":"project-overlay"},c.a.createElement("ul",{className:"project-overlay__list"},r.map(function(e){return c.a.createElement("li",{key:e.projectId,"data-testid":"project-overlay-action","aria-label":"Selecting project ".concat(e.name," to add task"),tabIndex:0,onClick:function(){t(e.projectId),n(!1)},onKeyDown:function(){t(e.projectId),n(!1)}},e.name)})))},S=function(e){var t=e.showTaskDate,a=e.setShowTaskDate,n=e.setTaskDate;return t&&c.a.createElement("div",{className:"task-date","data-testid":"task-date-overlay"},c.a.createElement("ul",{className:"task-date__list"},c.a.createElement("li",{"aria-label":"Selecting today as task date",tabIndex:0,onClick:function(){a(!1),n(d()().format("DD/MM/YYYY"))},"data-testid":"task-date-today"},c.a.createElement("span",null,c.a.createElement(l.j,null)),c.a.createElement("span",null,"Today")),c.a.createElement("li",{"aria-label":"Selecting tomorrow as task date",tabIndex:0,onClick:function(){a(!1),n(d()().add(1,"day").format("DD/MM/YYYY"))},"data-testid":"task-date-tomorrow"},c.a.createElement("span",null,c.a.createElement(l.i,null)),c.a.createElement("span",null,"Tomorrow")),c.a.createElement("li",{"aria-label":"Selecting next week as task date",tabIndex:0,onClick:function(){a(!1),n(d()().add(7,"day").format("DD/MM/YYYY"))},"data-testid":"task-date-next-week"},c.a.createElement("span",null,c.a.createElement(l.h,null)),c.a.createElement("span",null,"Next Week"))))},g=m.firestore().collection("tasks"),C=function(e){var t=e.showAddTaskMain,a=e.showQuickAddTask,r=e.setShowQuickAddTask,s=Object(n.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],f=Object(n.useState)(""),k=Object(o.a)(f,2),p=k[0],j=k[1],b=Object(n.useState)(!1),E=Object(o.a)(b,2),v=E[0],h=E[1],y=Object(n.useState)(""),O=Object(o.a)(y,2),N=O[0],_=O[1],w=Object(n.useState)(!1),C=Object(o.a)(w,2),P=C[0],x=C[1],T=Object(n.useState)(!1),Y=Object(o.a)(T,2),A=Y[0],M=Y[1],K=D(),B=K.selectedProject,X=(K.setSelectedProject,function(){var e=N||B,t="";return"TODAY"===e?t=d()().format("DD/MM/YYYY"):"NEXT_7"===e&&(t=d()().add(7,"days").format("DD/MM/YYYY")),u&&e&&g.add({archived:!1,projectId:e,taskName:u,date:t||p}).then(function(){r&&r(!1),x(!1),m(""),_(""),M(!1),h(!1)})});return c.a.createElement("div",{className:a?"add-task add-task__overlay":"add-task","data-testid":"add-task-comp"},t&&c.a.createElement("div",{"aria-label":"Add task",tabIndex:0,className:"add-task__shallow","data-testid":"show-main-action",onClick:function(){return x(!P)},onKeyDown:function(){return x(!P)}},c.a.createElement("span",{className:"add-task__plus"},"+"),c.a.createElement("span",{className:"add-task__text"},"Add Task")),(P||a)&&c.a.createElement("div",{className:"add-task__main","data-testid":"add-task-main"},a&&c.a.createElement("div",{"data-testid":"quick-add-task"},c.a.createElement("h2",{className:"header"},"Quick Add Task"),c.a.createElement("span",{tabIndex:0,className:"add-task__cancel-x","data-testid":"add-task-quick-cancel","aria-label":"Cancel adding a task",onClick:function(){r(!1),M(!1),h(!1)},onKeyDown:function(){r(!1),M(!1),h(!1)}},"X")),c.a.createElement(I,{setProject:_,showProjectOverlay:A,setShowProjectOverlay:M}),c.a.createElement(S,{setTaskDate:j,showTaskDate:v,setShowTaskDate:h}),c.a.createElement("input",{"aria-label":"Enter your task",className:"add-task__content","data-testid":"add-task-content",type:"text",value:u,onChange:function(e){return m(e.target.value)},tabIndex:0}),c.a.createElement("button",{"aria-label":"Submit your task",type:"button",className:"add-task__submit","data-testid":"add-task",tabIndex:0,onClick:function(){X()},onKeyDown:function(){X()}},"Add Task"),!a&&c.a.createElement("span",{className:"add-task__cancel","data-testid":"add-task-main-cancel",tabIndex:0,"aria-label":"Cancel adding task",onClick:function(){x(!1),M(!1),h(!1)},onKeyDown:function(){x(!1),M(!1),h(!1)}},"Cancel"),c.a.createElement("span",{className:"add-task__project","data-testid":"show-project-overlay","aria-label":"Select project",tabIndex:0,onClick:function(){return M(!A)},onKeyDown:function(){return M(!A)}},c.a.createElement(l.g,null)),c.a.createElement("span",{className:"add-task__date","data-testid":"show-task-date-overlay","aria-label":"Select task date",tabIndex:0,onClick:function(){return h(!v)},onKeyDown:function(){return h(!v)}},c.a.createElement(l.f,null))))},P=function(e){var t=e.darkMode,a=e.setDarkMode,r=Object(n.useState)(!1),s=Object(o.a)(r,2),d=s[0],i=s[1];return c.a.createElement("header",{className:"header","data-testid":"header"},c.a.createElement("nav",null,c.a.createElement("div",{className:"logo"},c.a.createElement("img",{src:"%PUBLIC_URL%/images/logo.png",alt:"Todoist"})),c.a.createElement("div",{className:"settings"},c.a.createElement("ul",null,c.a.createElement("li",{"data-testid":"quick-add-task-action",className:"settings__add"},c.a.createElement("div",{"aria-label":"Quick add task",tabIndex:0,onClick:function(){i(!0)},onKeyDown:function(){i(!0)}},"+")),c.a.createElement("li",{"data-testid":"dark-mode-action",className:"settings__darkmode"},c.a.createElement("div",{"aria-label":"Darkmode on/off",tabIndex:0,onClick:function(){a(!t)},onKeyDown:function(){a(!t)}},c.a.createElement(l.d,null)))))),c.a.createElement(C,{showQuickAddTask:d,setShowQuickAddTask:i}))},x=function(e){var t=e.project,a=D(),n=a.selectedProject,r=a.setSelectedProject;return console.log("selectedproject docid: "+n),c.a.createElement("li",{key:t.projectId,"data-doc-id":t.docId,"data-testid":"project-action",className:n===t.docId?"active sidebar__project":"sidebar__project",role:"button","aria-label":"Selecting project ".concat(t.name),tabIndex:2,onClick:function(){r(t.docId)},onKeyDown:function(){r(t.docId)}},c.a.createElement("span",{className:"sidebar__dot"},"\u2022"),c.a.createElement("span",{className:"sidebar__project-name"},t.name))},T=function(e){e.activeNull;var t=N().projects;return t&&t.map(function(e){return c.a.createElement(x,{project:e})})},Y=function(e){var t=Object(n.useState)("INBOX"),a=Object(o.a)(t,2),r=(a[0],a[1],D()),s=r.selectedProject,d=r.setSelectedProject;return c.a.createElement("ul",null,k.map(function(e){return c.a.createElement("li",{"aria-label":"Show ".concat(e.key," tasks"),key:e.key,"data-testid":e.key,className:s===e.key?"active":void 0,onClick:function(){d(e.key)},onKeyDown:function(){d(e.key)},tabIndex:1},c.a.createElement("span",null,"INBOX"===e.key&&c.a.createElement(l.c,null),"TODAY"===e.key&&c.a.createElement(l.e,null),"NEXT_7"===e.key&&c.a.createElement(l.f,null),"ARCHIVED"===e.key&&c.a.createElement(l.a,null)),c.a.createElement("span",null,e.name))}))},A=a(4),M=function(e){var t=e.shouldShow,a=void 0!==t&&t,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),f=u[0],k=u[1],p=j(),b=N(),E=b.projects,v=b.setProjects,h=m.firestore().collection("projects");return c.a.createElement("div",{className:"add-project","data-testid":"add-project"},s&&c.a.createElement("div",{className:"add-project__input"},c.a.createElement("input",{value:f,onChange:function(e){return k(e.target.value)},className:"add-project__name","data-testid":"add-project-name",type:"text",placeholder:"Name your project"}),c.a.createElement("button",{className:"add-project__submit",type:"button",onClick:function(){return f&&h.add({projectId:p,name:f,userId:"HcafYDT6NqkbwLPxqpsB"}).then(function(){v(Object(A.a)(E)),k(""),d(!1)})},"data-testid":"add-project-submit"},"Add Project"),c.a.createElement("span",{"data-testid":"hide-project-overlay",className:"add-project__cancel",onClick:function(){return d(!1)}},"Cancel")),c.a.createElement("span",{className:"add-project__plus"},"+"),c.a.createElement("span",{"aria-label":"Add project","data-testid":"add-project-action",className:"add-project__text",tabIndex:0,onClick:function(){return d(!0)},onKeyDown:function(){return d(!0)}},"Add Project"))},K=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=t[0],r=t[1];return c.a.createElement("div",{className:"sidebar","data-testid":"sidebar"},c.a.createElement("div",{className:"sidebar__generic"},c.a.createElement(Y,null)),c.a.createElement("div",{"aria-label":"Show/hide projects",className:"sidebar__middle",onClick:function(){return r(!a)},onKeyDown:function(){return r(!a)}},c.a.createElement("span",null,c.a.createElement(l.b,{className:a?void 0:"hidden-projects"})),c.a.createElement("h2",null,"Projects")),c.a.createElement("ul",{className:"sidebar__projects"},a&&c.a.createElement(T,null)),a&&c.a.createElement(M,null))},B=function(e){var t=e.id,a=e.taskName,n=e.archived,r=function(){m.firestore().collection("tasks").doc(t).update({archived:!n})};return c.a.createElement("div",{role:"button",className:"checkbox-holder","data-testid":"checkbox-action","aria-label":"Mark task ".concat(a," as done"),tabIndex:0,onKeyDown:function(){return r()},onClick:function(){return r()}},c.a.createElement("span",{className:n?"checkbox-checked":"checkbox-unchecked"}))},X=function(){var e=N(),t=e.projects,a=e.setProjects,r=D(),s=r.selectedProject,i=r.setSelectedProject,u=function(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)([]),s=Object(o.a)(l,2),i=s[0],u=s[1];return Object(n.useEffect)(function(){var t=v;return t=(t=e&&!p(e)?t=t.where("projectId","==",e):"TODAY"===e?t=t.where("date","==",d()().format("DD/MM/YYYY")):"INBOX"===e?t=t.where("date","==",""):t).onSnapshot(function(t){var a=t.docs.map(function(e){return E({id:e.id},e.data())});r("NEXT_7"===e?a.filter(function(e){return d()(e.date,"DD-MM-YYYY").diff(d()(),"days")<=7&&!0!==e.archived}):a.filter(function(e){return!0!==e.archived})),u(a.filter(function(e){return!1!==e.archived}))}),function(){return t()}},[e]),{tasks:c,archivedTasks:i}}(s),f=u.tasks,j=u.archivedTasks,b="";t&&s&&!p(s)&&(b=function(e,t){return e.find(function(e){return e.docId===t})}(t,s).name),p(s)&&s&&(b=function(e,t){return e.find(function(e){return e.key===t})}(k,s).name),Object(n.useEffect)(function(){document.title="".concat(b,": Todoist")});var h=[];h="ARCHIVED"===s?j:f;var y=m.firestore().collection("tasks").where("archived","==",!0);return c.a.createElement("div",{className:"tasks","data-testid":"tasks"},c.a.createElement("div",{className:"heading"},c.a.createElement("h2",{"data-testid":"project-name"},b),"ARCHIVED"===s&&c.a.createElement("div",{className:"archived-icons"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){y.get().then(function(e){e.forEach(function(e){e.ref.update({archived:!1})})})}},c.a.createElement(l.l,null)),c.a.createElement("li",{onClick:function(){y.get().then(function(e){e.forEach(function(e){e.ref.delete()})})}},c.a.createElement(l.k,null)))),!p(s)&&c.a.createElement("div",{className:"archived-icons"},c.a.createElement("ul",null,c.a.createElement("li",{onClick:function(){return function(e){m.firestore().collection("projects").doc(e).delete().then(function(){a(Object(A.a)(t)),i("INBOX")})}(s)}},c.a.createElement(l.k,null))))),c.a.createElement("ul",{className:"tasks__list"},h.map(function(e){return c.a.createElement("li",{key:"".concat(e.id)},c.a.createElement(B,{id:e.id,taskName:e.taskName,archived:"ARCHIVED"===s}),c.a.createElement("span",null,e.taskName))})),c.a.createElement(C,{showAddTaskMain:!0}))},R=function(){return c.a.createElement("section",{className:"content"},c.a.createElement(K,null),c.a.createElement(X,null))};a(23);Object(r.render)(c.a.createElement(function(e){var t=e.darkModeDefault,a=void 0!==t&&t,r=Object(n.useState)(a),l=Object(o.a)(r,2),s=l[0],d=l[1];return c.a.createElement(w,null,c.a.createElement(O,null,c.a.createElement("div",{className:"App"},c.a.createElement("main",{"data-testid":"application",className:s?"darkMode":void 0},c.a.createElement(P,{darkMode:s,setDarkMode:d}),c.a.createElement(R,null)))))},null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.a5c82e0f.chunk.js.map